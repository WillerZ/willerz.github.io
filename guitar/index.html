<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <link rel="stylesheet" href="//willerz.github.io/assets/css/style.css" media="screen" type="text/css">
        <link rel="stylesheet" href="//willerz.github.io/assets/css/print.css" media="print" type="text/css">
        <!-- Google tag (gtag.js) -->
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}

            // Set consent to 'denied'
            // I don't want to un-deny these for anyone, so no banner.
            gtag('consent', 'default', {
                'ad_storage': 'denied',
                'ad_user_data': 'denied',
                'ad_personalization': 'denied',
                'analytics_storage': 'denied',
                'wait_for_update': 1,
            });
            gtag('js', new Date());
            gtag('config', 'G-6JP574KNYS');
        </script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-6JP574KNYS"></script>
        <!-- End of Google tag (gtag.js) -->
        <link rel="modulepreload" href="./worker.js">
        <link rel="modulepreload" href="./deps/openscad-2026.02.01/openscad.js">
        <link rel="shortcut icon" href="/favicon.ico" />
        <title>Guitar</title>
    </head>
    <body>
        <header>
            <div class="inner">
                <a href="https://willerz.github.io/">
                <h1>Phil Willoughby</h1>
                </a>
                <h2>Greetings</h2>
                <a href="https://github.com/WillerZ" class="button"><small>Follow me on</small> GitHub</a>
            </div>
        </header>
        <div id="content-wrapper">
            <div class="inner clearfix">
                <section id="main-content">
                    <h1>Guitar Designer</h1>
                    <p>Be warned! This is a proof-of-concept and some of the combinations are known to be incomplete at this time.</p>
                    <p>Usage instructions:</p>
                    <p>Make your choices, click the button to build the guitar, download the 2 or 3 STL files, print them.</p>
                    <p>
                        <label for="body-select">Choose the body style:</label>
                        <select name="body" id="body-select">
                            <option value="batlike">Bat-like</option>
                            <option value="later">Later</option>
                            <option value="starter">Starter</option>
                            <option value="tasteful">Tasteful</option>
                        </select>
                    </p>
                    <p>
                        <label for="neckSocket-select">Choose the neck socket fitment:</label>
                        <select name="neckSocket" id="neckSocket-select">
                            <option value="tool/neck/strat.3MF">Strat</option>
                            <option value="tool/neck/tele.3MF">Tele</option>
                        </select>
                    </p>
                    <p>
                        <label for="neckPickup-select">Choose the neck pickup type:</label>
                        <select name="neckPickup" id="neckPickup-select">
                            <option value="">None</option>
                            <option value="tool/pickup/neck/humbucker.3MF">Humbucker</option>
                            <option value="tool/pickup/neck/jazzmaster.3MF">Jazzmaster</option>
                            <option value="tool/pickup/neck/p90.3MF">P-90</option>
                            <option value="tool/pickup/neck/strat.3MF">Stratocaster</option>
                            <option value="tool/pickup/neck/tele.3MF">Telecaster</option>
                        </select>
                    </p>
                    <p>
                        <label for="middlePickup-select">Choose the middle pickup type:</label>
                        <select name="middlePickup" id="middlePickup-select">
                            <option value="">None</option>
                            <option value="tool/pickup/middle/strat.3MF">Stratocaster</option>
                        </select>
                    </p>
                    <p>
                        <label for="bridgePickup-select">Choose the bridge pickup type:</label>
                        <select name="bridgePickup" id="bridgePickup-select">
                            <option value="">None</option>
                            <option value="tool/pickup/bridge/humbucker.3MF">Humbucker</option>
                            <option value="tool/pickup/bridge/jazzmaster.3MF">Jazzmaster</option>
                            <option value="tool/pickup/bridge/p90.3MF">P-90</option>
                            <option value="tool/pickup/bridge/strat.3MF">Stratocaster</option>
                            <option value="tool/pickup/bridge/tele.3MF">Telecaster</option>
                        </select>
                    </p>
                    <p>
                        <label for="bridge-select">Choose the bridge type:</label>
                        <select name="bridge" id="bridge-select">
                            <option value="tool/bridge/guyker-roller-TOM.3MF">Guyker Roller Tune-O-Matic Style</option>
                            <option value="tool/bridge/musiclily-ultra.3MF">Musiclily Ultra 52.5mm Hardtail</option>
                            <option value="tool/bridge/schaller-3d6.3MF">Schaller 3D6</option>
                        </select>
                    </p>
                    <p>
                    <button id="calculateButton" class="button">Build my Guitar</button>
                    </p>
                    <div id="output"></div>
                </section>
                <aside id="sidebar">
                    <p>This page was generated by a human typing HTML into a text editor.</p>
                </aside>
            </div>
        </div>
        <script type="module">
            const cadWorker = new Worker('./worker.js', {type:"module"});

            const bodies = {
                'batlike': [
                        "body/batlike.3MF",
                        "body/batlike-guard.3MF",
                        "body/batlike-cover.3MF",
                    ],
                'later': [
                        "body/later.3MF",
                        "body/later-guard.3MF",
                    ],
                'starter': [
                        "body/starter.3MF",
                        "body/starter-guard.3MF",
                    ],
                'tasteful': [
                        "body/tasteful.3MF",
                        "body/tasteful-guard.3MF",
                    ],
            };

            const makeBuildEvent = () => {
                const buildEvent = {
                    'bodyStyle': document.getElementById("body-select").value,
                    'neckSocket': document.getElementById("neckSocket-select").value,
                    'bridge': document.getElementById("bridge-select").value
                };
                if (document.getElementById("neckPickup-select").value) {
                    buildEvent['neckPickup'] = document.getElementById("neckPickup-select").value;
                }
                if (document.getElementById("middlePickup-select").value) {
                    buildEvent['middlePickup'] = document.getElementById("middlePickup-select").value;
                }
                if (document.getElementById("bridgePickup-select").value) {
                    buildEvent['bridgePickup'] = document.getElementById("bridgePickup-select").value;
                }
                return buildEvent;
            };

            const makeItems = () => {
                    return [
                        `Body Style: ${document.getElementById("body-select").value}`,
                        `Neck Attachment: ${document.getElementById("neckSocket-select").value.split('/').at(-1).replace('.3MF','')}`,
                        `Bridge: ${document.getElementById("bridge-select").value.split('/').at(-1).replace('.3MF','')}`,
                        document.getElementById("neckPickup-select").value ? `Neck Pickup: ${document.getElementById("neckPickup-select").value.split('/').at(-1).replace('.3MF','')}` : "",
                        document.getElementById("middlePickup-select").value ? `Middle Pickup: ${document.getElementById("middlePickup-select").value.split('/').at(-1).replace('.3MF','')}` : "",
                        document.getElementById("bridgePickup-select").value ? `Bridge Pickup: ${document.getElementById("bridgePickup-select").value.split('/').at(-1).replace('.3MF','')}` : "",
                    ].filter(Boolean).map((name) => {return {'item_name':name}; });
            };

            cadWorker.onmessage = (msg) => {
                document.getElementById("output").innerHTML = `<p>Guitar built, here are the parts you need to print:</p><p>${msg.data.join("</p><p>")}</p>`;
                document.getElementById("output").children[1].firstElementChild.addEventListener("click", () => {
                    gtag('event', 'dl_guitar', makeBuildEvent());
                    gtag('event', 'begin_checkout', {
                    'currency':'USD',
                    'value':'1000.00',
                    'items': makeItems(),
                });
                });
            };

            document.getElementById("calculateButton").addEventListener("click", () => {
                document.getElementById("output").innerHTML = '<p>Building your guitar</p>';

                gtag('event', 'build_guitar', makeBuildEvent());
                gtag('event', 'add_to_cart', {
                    'currency':'USD',
                    'value':'1000.00',
                    'items': makeItems(),
                });
                cadWorker.postMessage({
                    bodies: bodies[document.getElementById("body-select").value],
                    tools: [
                        document.getElementById("neckSocket-select").value,
                        document.getElementById("neckPickup-select").value,
                        document.getElementById("middlePickup-select").value,
                        document.getElementById("bridgePickup-select").value,
                        document.getElementById("bridge-select").value,
                    ].filter(Boolean)
                });
            });
        </script>
    </body>
</html>